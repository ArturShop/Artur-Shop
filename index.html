filas.forEach((fila, i) => {
  if (!fila.trim()) return;

  const [nombre, precio, imagen, tallas, stockRaw] = fila.split(",");
  const stock = Number(stockRaw);

  const sinStock = stock === 0;

  html += `
    <div class="producto">
      <img src="${imagen}">
      <h3>${nombre}</h3>
      <p><strong>$${precio} MXN</strong></p>
      <p>ğŸ“ Tallas: ${tallas}</p>

      ${
        sinStock
        ? `<p style="color:red;font-weight:bold;">âŒ Sin stock</p>`
        : `<p>ğŸ“¦ Stock disponible: <strong>${stock}</strong></p>`
      }

      <input type="number"
        min="1"
        max="${stock}"
        value="1"
        id="qty-${i}"
        ${sinStock ? "disabled" : ""}
      >

      <button class="btn"
        ${sinStock ? "disabled style='opacity:.5;cursor:not-allowed;'" : ""}
        onclick="agregarAlCarrito(
          '${nombre}',
          ${precio},
          document.getElementById('qty-${i}').value
        )"
      >
        AÃ±adir al carrito
      </button>
    </div>
  `;
});
